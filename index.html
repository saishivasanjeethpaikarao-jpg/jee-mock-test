<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JEE Daily AI Generator</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
onload="renderMathInElement(document.body);"></script>

<style>
body{margin:0;font-family:Arial;background:#f3f4f6}
header{background:#111827;color:white;padding:15px}
#timer{float:right;font-weight:bold}
.container{display:flex;height:90vh}
.left{width:75%;padding:20px;overflow:auto}
.right{width:25%;background:#e5e7eb;padding:10px;overflow:auto}
.qbox{
width:34px;height:34px;margin:4px;
display:inline-flex;align-items:center;justify-content:center;
border-radius:5px;font-size:12px;cursor:pointer
}
.notvisited{background:#fff;border:1px solid #aaa}
.answered{background:#22c55e;color:white}
.review{background:#8b5cf6;color:white}
.visited{background:#facc15}
button{padding:8px 14px;margin:6px;border:none;border-radius:6px;cursor:pointer}
.save{background:#2563eb;color:white}
.submit{background:#111827;color:white}
</style>
</head>

<body>

<header>
JEE DAILY HARD AI MOCK
<span id="timer">90:00</span>
</header>

<div class="container">
<div class="left">
<div id="questionArea"></div>
<button class="save" onclick="saveNext()">Save & Next</button>
<button class="submit" onclick="submitTest()">Submit</button>
</div>
<div class="right">
<div id="palette"></div>
</div>
</div>

<script>

/* ================= BIG THEORY QUESTION BANK ================= */

let bank = [

/* PHYSICS */

{
subject:"Physics",
type:"mcq",
question:"A block slides down rough incline (θ=30°). μ=0.2. Find acceleration.",
options:["3.1","2.6","4.9","5"],
answer:1
},

{
subject:"Physics",
type:"mcq",
question:"Two capacitors C and 2C connected in parallel then series. Equivalent?",
options:["2C/3","3C/2","C","C/3"],
answer:0
},

{
subject:"Physics",
type:"numerical",
question:"Half life = 5 days. After 20 days fraction left?"
},

/* CHEMISTRY */

{
subject:"Chemistry",
type:"mcq",
question:"Bond order of O2+ is:",
options:["1","1.5","2","2.5"],
answer:3
},

{
subject:"Chemistry",
type:"mcq",
question:"Strongest acid:",
options:["HF","HCl","HBr","HI"],
answer:3
},

{
subject:"Chemistry",
type:"numerical",
question:"pH of 10^-3 M HCl?"
},

/* MATHS */

{
subject:"Maths",
type:"mcq",
question:"If lim x→0 sinx/x = ?",
options:["0","1","∞","-1"],
answer:1
},

{
subject:"Maths",
type:"mcq",
question:"Number of solutions |x²−1|=0",
options:["1","2","3","4"],
answer:1
},

{
subject:"Maths",
type:"numerical",
question:"Determinant of [[1,2],[3,4]]"
}

];


/* ========== DAILY SEED RANDOMIZER ========== */

function shuffleByDate(arr){
let today = new Date().toISOString().slice(0,10);
let seed = today.split("-").join("");
let random = parseInt(seed);
return arr.sort(()=>0.5 - (Math.sin(random++)*10000)%1);
}

let questions = shuffleByDate([...bank]).slice(0,30);

/* ================= TEST ENGINE ================= */

let current=0;
let responses={};
let status={};

function loadPalette(){
let p=document.getElementById("palette");
p.innerHTML="";
questions.forEach((q,i)=>{
let box=document.createElement("div");
box.className="qbox "+(status[i]||"notvisited");
box.innerText=i+1;
box.onclick=()=>{current=i;loadQuestion();}
box.id="q"+i;
p.appendChild(box);
});
}

function loadQuestion(){
let q=questions[current];
if(!status[current]) status[current]="visited";

let area=document.getElementById("questionArea");
area.innerHTML=`<h3>Q${current+1}</h3>${q.question}<br><br>`;

if(q.type==="mcq"){
q.options.forEach((opt,i)=>{
area.innerHTML+=`<input type="radio" name="opt" value="${i}"> ${opt}<br>`;
});
}
else{
area.innerHTML+=`<input type="number" id="num">`;
}

renderMathInElement(area);
updatePalette();
}

function saveNext(){
let q=questions[current];
if(q.type==="mcq"){
let sel=document.querySelector('input[name="opt"]:checked');
if(sel){responses[current]=parseInt(sel.value);status[current]="answered";}
}
else{
let val=document.getElementById("num").value;
if(val){responses[current]=val;status[current]="answered";}
}
current++;
if(current>=questions.length) current=questions.length-1;
loadQuestion();
}

function updatePalette(){
questions.forEach((q,i)=>{
let box=document.getElementById("q"+i);
if(box) box.className="qbox "+(status[i]||"notvisited");
});
}

/* TIMER */

let total=90*60;
let timer=document.getElementById("timer");
let countdown=setInterval(()=>{
let m=Math.floor(total/60);
let s=total%60;
timer.innerText=`${m}:${s<10?"0":""}${s}`;
total--;
if(total<0){clearInterval(countdown);submitTest();}
},1000);

function submitTest(){
clearInterval(countdown);
let score=0;
questions.forEach((q,i)=>{
if(q.type==="mcq"){
if(responses[i]==q.answer) score+=4;
else if(responses[i]!=undefined) score-=1;
}
});
document.body.innerHTML=`<h2>Today's Score: ${score}</h2>`;
}

loadPalette();
loadQuestion();

</script>

</body>
</html>
